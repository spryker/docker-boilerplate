version: "3.5"

x-volumes:
  &mac-dev-volumes
  volumes:
    - ./docker/context/php/opcache_dev.ini:/etc/php7/conf.d/opcache.ini
    - data-sync:/data

x-env_file:
  &mac-dev-envfile
  env_file:
    - docker/dev.env

services:

  yves_de:
    <<: *mac-dev-envfile
    <<: *mac-dev-volumes
  
  yves_at:
    <<: *mac-dev-envfile
    <<: *mac-dev-volumes

  yves_us:
    <<: *mac-dev-envfile
    <<: *mac-dev-volumes

  glue_de:
    <<: *mac-dev-envfile
    <<: *mac-dev-volumes

  glue_at:
    <<: *mac-dev-envfile
    <<: *mac-dev-volumes

  glue_us:
    <<: *mac-dev-envfile
    <<: *mac-dev-volumes

  zed_de:
    <<: *mac-dev-envfile
    <<: *mac-dev-volumes

  zed_at:
    <<: *mac-dev-envfile
    <<: *mac-dev-volumes

  zed_us:
    <<: *mac-dev-envfile
    <<: *mac-dev-volumes

  scheduler:
    <<: *mac-dev-envfile
    <<: *mac-dev-volumes

  nginx_frontend:
    volumes:
        - ./docker/context/nginx/vhost.d:/etc/nginx/vhost.d
        - ./docker/context/nginx/vhost.d_dev/default_dev:/etc/nginx/vhost.d/default
        - data-sync:/data

volumes:
  data-sync:
    external: true
  assets:
